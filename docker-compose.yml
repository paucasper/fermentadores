services: 
  app: 
    build: 
      context: . 
      dockerfile: docker/php/Dockerfile 
    volumes: 
      - ./:/var/www/html 
    environment: 
      APP_ENV: local 
      APP_DEBUG: "true" 
      DB_CONNECTION: pgsql 
      DB_HOST: db 
      DB_PORT: 5432 
      DB_DATABASE: app 
      DB_USERNAME: app 
      DB_PASSWORD: app 
    depends_on: 
      - db 
  
  nginx: 
    image: nginx:1.25-alpine 
    ports: 
      - "8080:80" 
    volumes: 
      - ./:/var/www/html 
      - ./docker/nginx/default.conf:/etc/nginx/conf.d/default.conf:ro 
    depends_on: 
      - app 
  
  db: 
    image: postgres:16 
    environment: 
      POSTGRES_DB: app 
      POSTGRES_USER: app 
      POSTGRES_PASSWORD: app 
    ports: 
      - "5432:5432" 
    volumes: 
      - pgdata:/var/lib/postgresql/data 
  
volumes: 
  pgdata: 